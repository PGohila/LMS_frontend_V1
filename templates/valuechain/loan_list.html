{% extends 'base.html' %}

{% block body_block %}
<body>
<style>
  .table-responsive {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch; /* smooth scrolling for mobile */
}
.table th, .table td {
    white-space: nowrap;
}

</style>
  <main id="main" class="main">

    <div class="pagetitle">
      <h1>Loan List</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="index.html">Home</a></li>
          <li class="breadcrumb-item">Forms</li>
          <li class="breadcrumb-item active">Loan List</li>
        </ol>
      </nav>
    </div><!-- End Page Title -->
    <section class="section">
      <div class="row">
    
        <div class="col-lg-12">

          <div class="card">
            <div class="card-body">
                <h5 class="card-title"></h5>
        
                <!-- Add a wrapper with overflow control -->
                <div class="table-responsive">
                    <table class="table datatable">
                        <thead>
                            <tr style="white-space: nowrap;"> 
                              <th scope="col">Is Active</th>
                                <th scope="col">Customer id</th>
                                <th scope="col">Loan ID</th>
                                <th scope="col">Loan Type</th>
                                <th scope="col">loan Amount</th>
                                <th scope="col">Approved Amount</th>
                                <th scope="col">Tenure</th>
                                <th scope="col">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for data in loan_details %}
                                <tr style="white-space: nowrap;">
                                  <td>{% if data.is_active == True %}<span class="badge bg-success"><i class="bi bi-check-circle me-1"></i> </span>{% else %}<span class="badge bg-danger"><i class="bi bi-exclamation-octagon me-1"></i> </span>{% endif %}</td>
                                    <td>{{data.customer.firstname}}</td>
                                    <td>{{data.loan_id}}</td>
                                    <td>{{data.loanapp_id.loantype.loantype}}</td>
                                    <td>{{data.loan_amount}}</td>
                                    <td>{{data.approved_amount}}</td>
                                    <td>{{data.tenure}} {{data.tenure_type}}</td>
                            
                                    <td>
                                      {% if data.disbursement_trenches %}
                                      <a href="{% url 'loan_detail_trenches' data.id %}"><span data-toggle="tooltip" title="edit" style="color: black;"> <button class="btn btn-info btn-sm" type="button"><i class="fa fa-eye"></i>
                                      </button></a>
                                      {% else %}
                                      <a href="{% url 'loan_upadate_trenches' data.id %}"><span data-toggle="tooltip" title="Apply disbursement trenches" style="color: black;"> <button class="btn btn-danger btn-sm" type="button"><i class="fa fa-clone"></i>
                                      </button></a>
                                      {% endif %}
                                     
                
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        </div>
      </div>
    </section>

  </main><!-- End #main -->
  {% endblock %}

 